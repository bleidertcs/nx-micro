
 NX   Running target e2e for project csv-processor-e2e and 4 tasks it depends on:



> nx run csv-processor:build  [local cache]


> nx run api-gateway:build  [local cache]


> nx run csv-processor:serve:development


> nx run api-gateway:serve:development


> nx run csv-processor-e2e:e2e

[2m> [22m[2mnx run[22m csv-processor:build:development  [2m[local cache][22m
[2m> [22mwebpack-cli build --node-env=development
chunk (runtime: main) [1m[32mmain.js[39m[22m (main) 265 KiB [1m[33m[entry][39m[22m [1m[32m[rendered][39m[22m
[1m[33mWARNING[39m[22m in [1m../../libs/prisma-client/src/lib/generated/prisma-client-lib/runtime/library.js[39m[22m
[1mModule Warning (from ../../node_modules/source-map-loader/dist/cjs.js):
[1m[31mFailed[39m[22m[1m to parse source map from 'C:\Users\bleid\Desktop\nx-microservices\libs\prisma-client\src\lib\generated\prisma-client-lib\runtime\library.js.map' file: [1m[31mError[39m[22m[1m: ENOENT: no such file or directory, open 'C:\Users\bleid\Desktop\nx-microservices\libs\prisma-client\src\lib\generated\prisma-client-lib\runtime\library.js.map'[39m[22m
webpack compiled with [1m[33m1 warning[39m[22m (707a8cecdcbf2a6a)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project csv-processor[39m
[2mNx read the output from the cache instead of running the command for 1 out of 1 tasks.[22m
[2m> [22m[2mnx run[22m api-gateway:build:development  [2m[local cache][22m
[2m> [22mwebpack-cli build --node-env=development
chunk (runtime: main) [1m[32mmain.js[39m[22m (main) 44.2 KiB [1m[33m[entry][39m[22m [1m[32m[rendered][39m[22m
webpack compiled [1m[32msuccessfully[39m[22m (4db47c8089a859f6)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project api-gateway[39m
[2mNx read the output from the cache instead of running the command for 1 out of 1 tasks.[22m
Debugger listening on ws://localhost:9229/92b1fb1c-1e6e-4ea7-a11c-2855a08ca6c3
Debugger listening on ws://localhost:9229/92b1fb1c-1e6e-4ea7-a11c-2855a08ca6c3
For help, see: https://nodejs.org/en/docs/inspector

Setting up...
Starting inspector on localhost:9229 failed: address already in use

Â­Æ’Ã´Ã­ Observabilidad iniciada para: csv-processor
[32m[Nest] 36656  - [39m29/11/2025, 6:08:08 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 36656  - [39m29/11/2025, 6:08:08 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +13ms[39m
[32m[Nest] 36656  - [39m29/11/2025, 6:08:08 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaClientModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 36656  - [39m29/11/2025, 6:08:08 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 36656  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestMicroservice] [39m[32mNest microservice successfully started[39m[38;5;3m +385ms[39m
[32m[Nest] 36656  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [32mÂ­Æ’ÃœÃ‡ CSV Processor microservice is running on TCP port: 3003[39m
Â­Æ’Ã´Ã­ Observabilidad iniciada para: api-gateway
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32minfo[39m: API Gateway Service initialized {"service":"microservices","timestamp":"2025-11-29T22:08:09.456Z"}
[32minfo[39m: Gateway Service initialized with TCP clients {"service":"microservices","timestamp":"2025-11-29T22:08:09.458Z"}
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +12ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mClientsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32minfo[39m: API Gateway Controller initialized {"service":"microservices","timestamp":"2025-11-29T22:08:09.460Z"}
[32minfo[39m: Gateway Controller initialized {"service":"microservices","timestamp":"2025-11-29T22:08:09.461Z"}
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +23ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mGatewayController {/api/services}:[39m[38;5;3m +1ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCsvController {/api/csv}:[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/csv/process, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mNetflixController {/api/services/netflix/netflix}:[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/search, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/filter, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/:id, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/:id, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/profile, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [32mÂ­Æ’ÃœÃ‡ API Gateway is running on: http://localhost:3000/api[39m
[32m[Nest] 33040  - [39m29/11/2025, 6:08:09 p.â”¬Ã¡m. [32m    LOG[39m [32mÂ­Æ’Ã´Ã˜ Swagger is running on: http://localhost:3000/api/docs[39m
[winston] Unknown logger level: undefined

[32minfo[39m: Starting CSV processing from: C:\Users\bleid\Desktop\nx-microservices\tmp\uploads\137372cce535abca61375fff4576dc109.csv {"service":"microservices","timestamp":"2025-11-29T22:08:11.570Z"}
[33mwarn[39m: Skipping invalid row: title,content,rating {"service":"microservices","timestamp":"2025-11-29T22:08:11.576Z"}
[33mwarn[39m: Skipping invalid row: Great Movie,Loved it!,5 {"service":"microservices","timestamp":"2025-11-29T22:08:11.577Z"}
[33mwarn[39m: Skipping invalid row: Bad Movie,Hated it.,1 {"service":"microservices","timestamp":"2025-11-29T22:08:11.577Z"}
[32minfo[39m: CSV processing completed. Total records: 0 {"service":"microservices","timestamp":"2025-11-29T22:08:11.578Z"}
 FAIL   csv-processor-e2e  apps/csv-processor-e2e/src/csv-processor/csv-processor.spec.ts
  CSV Processor E2E
    â”œÃ¹ should process CSV and save data to database (2066 ms)
  Ã”Ã¹Ã… CSV Processor E2E Ã”Ã‡â•‘ should process CSV and save data to database
    expect(received).toBeGreaterThan(expected)
    Expected: > 0
    Received:   0

      65 |
      66 |       const count = await prisma.review.count();
    > 67 |       expect(count).toBeGreaterThan(0);
         |                     ^
      68 |       // expect(count).toBe(2);
      69 |     } else {
      70 |       // Fallback or skip

      at src/csv-processor/csv-processor.spec.ts:67:21
      at fulfilled (../../node_modules/tslib/tslib.js:167:62)
Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        3.584 s
Ran all test suites.
Attempting to close port 3000
[Nest] 36656  - 29/11/2025, 6:08:13 p.â”¬Ã¡m.   ERROR [Server] InvalidTcpDataReceptionException [Error]: The invalid received message from tcp server
    at Socket.<anonymous> (C:\Users\bleid\Desktop\nx-microservices\node_modules\@nestjs\microservices\server\server-tcp.js:50:34)
    at Socket.emit (node:events:530:35)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at processTicksAndRejections (node:internal/process/task_queues:90:21)

[7m[1m[36m NX [39m[22m[27m [1mProcess exited with code 1, waiting for changes to restart...[22m
Port 3000 successfully closed
Tearing down...



 NX   Running target e2e for project csv-processor-e2e and 4 tasks it depends on failed

Failed tasks:

- csv-processor-e2e:e2e

Hint: run the command with --verbose for more details.

