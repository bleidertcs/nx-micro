
 NX   Running target e2e for project csv-processor-e2e and 4 tasks it depends on:



> nx run csv-processor:build  [local cache]


> nx run api-gateway:build  [local cache]


> nx run csv-processor:serve:development


> nx run api-gateway:serve:development


> nx run csv-processor-e2e:e2e

[2m> [22m[2mnx run[22m csv-processor:build:development  [2m[local cache][22m
[2m> [22mwebpack-cli build --node-env=development
chunk (runtime: main) [1m[32mmain.js[39m[22m (main) 265 KiB [1m[33m[entry][39m[22m [1m[32m[rendered][39m[22m
[1m[33mWARNING[39m[22m in [1m../../libs/prisma-client/src/lib/generated/prisma-client-lib/runtime/library.js[39m[22m
[1mModule Warning (from ../../node_modules/source-map-loader/dist/cjs.js):
[1m[31mFailed[39m[22m[1m to parse source map from 'C:\Users\bleid\Desktop\nx-microservices\libs\prisma-client\src\lib\generated\prisma-client-lib\runtime\library.js.map' file: [1m[31mError[39m[22m[1m: ENOENT: no such file or directory, open 'C:\Users\bleid\Desktop\nx-microservices\libs\prisma-client\src\lib\generated\prisma-client-lib\runtime\library.js.map'[39m[22m
webpack compiled with [1m[33m1 warning[39m[22m (707a8cecdcbf2a6a)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project csv-processor[39m
[2mNx read the output from the cache instead of running the command for 1 out of 1 tasks.[22m
[2m> [22m[2mnx run[22m api-gateway:build:development  [2m[local cache][22m
[2m> [22mwebpack-cli build --node-env=development
chunk (runtime: main) [1m[32mmain.js[39m[22m (main) 44.2 KiB [1m[33m[entry][39m[22m [1m[32m[rendered][39m[22m
webpack compiled [1m[32msuccessfully[39m[22m (4db47c8089a859f6)
[0m[7m[1m[32m NX [39m[22m[27m[0m  [32mSuccessfully ran target [1mbuild[22m for project api-gateway[39m
[2mNx read the output from the cache instead of running the command for 1 out of 1 tasks.[22m
Setting up...
Debugger listening on ws://localhost:9229/8ca10cec-4517-494b-90fd-68f4bfa65da4
Debugger listening on ws://localhost:9229/8ca10cec-4517-494b-90fd-68f4bfa65da4
For help, see: https://nodejs.org/en/docs/inspector

Starting inspector on localhost:9229 failed: address already in use

Â­Æ’Ã´Ã­ Observabilidad iniciada para: csv-processor
[32m[Nest] 22268  - [39m29/11/2025, 6:07:12 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 22268  - [39m29/11/2025, 6:07:12 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +14ms[39m
[32m[Nest] 22268  - [39m29/11/2025, 6:07:12 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaClientModule dependencies initialized[39m[38;5;3m +5ms[39m
[32m[Nest] 22268  - [39m29/11/2025, 6:07:12 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 22268  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestMicroservice] [39m[32mNest microservice successfully started[39m[38;5;3m +461ms[39m
[32m[Nest] 22268  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [32mÂ­Æ’ÃœÃ‡ CSV Processor microservice is running on TCP port: 3003[39m
Â­Æ’Ã´Ã­ Observabilidad iniciada para: api-gateway
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32minfo[39m: API Gateway Service initialized {"service":"microservices","timestamp":"2025-11-29T22:07:13.458Z"}
[32minfo[39m: Gateway Service initialized with TCP clients {"service":"microservices","timestamp":"2025-11-29T22:07:13.461Z"}
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mObservabilityModule dependencies initialized[39m[38;5;3m +11ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mClientsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32minfo[39m: API Gateway Controller initialized {"service":"microservices","timestamp":"2025-11-29T22:07:13.463Z"}
[32minfo[39m: Gateway Controller initialized {"service":"microservices","timestamp":"2025-11-29T22:07:13.463Z"}
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/api}:[39m[38;5;3m +20ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mGatewayController {/api/services}:[39m[38;5;3m +1ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mCsvController {/api/csv}:[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/csv/process, POST} route[39m[38;5;3m +2ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mNetflixController {/api/services/netflix/netflix}:[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/search, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/filter, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/:id, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/:id, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/services/netflix/netflix/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/api/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/refresh, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/validate, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/api/auth/profile, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [32mÂ­Æ’ÃœÃ‡ API Gateway is running on: http://localhost:3000/api[39m
[32m[Nest] 29220  - [39m29/11/2025, 6:07:13 p.â”¬Ã¡m. [32m    LOG[39m [32mÂ­Æ’Ã´Ã˜ Swagger is running on: http://localhost:3000/api/docs[39m
[Nest] 29220  - 29/11/2025, 6:07:14 p.â”¬Ã¡m.   ERROR [ExceptionsHandler] TypeError: Cannot read properties of undefined (reading 'filename')
    at CsvController.processCsv (C:\Users\bleid\Desktop\nx-microservices\apps\api-gateway\src\app\controllers\csv.controller.ts:46:86)
    at C:\Users\bleid\Desktop\nx-microservices\node_modules\@nestjs\core\router\router-execution-context.js:38:29
    at processTicksAndRejections (node:internal/process/task_queues:105:5)

 FAIL   csv-processor-e2e  apps/csv-processor-e2e/src/csv-processor/csv-processor.spec.ts
  CSV Processor E2E
    â”œÃ¹ should process CSV and save data to database (68 ms)
  Ã”Ã¹Ã… CSV Processor E2E Ã”Ã‡â•‘ should process CSV and save data to database
    AxiosError: Request failed with status code 500

      at settle (../../node_modules/axios/lib/core/settle.js:19:12)
      at IncomingMessage.handleStreamEnd (../../node_modules/axios/lib/adapters/http.js:793:11)
      at Axios.request (../../node_modules/axios/lib/core/Axios.js:45:41)
Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 total
Snapshots:   0 total
Time:        0.888 s, estimated 1 s
Ran all test suites.
Attempting to close port 3000
[7m[1m[36m NX [39m[22m[27m [1mProcess exited with code 1, waiting for changes to restart...[22m
Port 3000 successfully closed
Tearing down...



 NX   Running target e2e for project csv-processor-e2e and 4 tasks it depends on failed

Failed tasks:

- csv-processor-e2e:e2e

Hint: run the command with --verbose for more details.

